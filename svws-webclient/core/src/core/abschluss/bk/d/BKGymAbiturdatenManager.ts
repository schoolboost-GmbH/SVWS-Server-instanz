import { JavaObject } from '../../../../java/lang/JavaObject';
import { HashMap } from '../../../../java/util/HashMap';
import { ArrayList } from '../../../../java/util/ArrayList';
import { DeveloperNotificationException } from '../../../../core/exceptions/DeveloperNotificationException';
import { BKGymBelegpruefungD18 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD18';
import { BKGymBelegpruefungD19 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD19';
import { BKGymBelegpruefungD9 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD9';
import { BKGymFaecherManager } from '../../../../core/utils/bk/BKGymFaecherManager';
import { BKGymBelegpruefungD7 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD7';
import { BKGymBelegpruefungD12 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD12';
import { BKGymBelegpruefungD8 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD8';
import { BKGymBelegpruefungD13 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD13';
import type { List } from '../../../../java/util/List';
import { BKGymBelegpruefungD10 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD10';
import { BKGymBelegpruefungD6 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD6';
import { BKGymBelegpruefungD3 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD3';
import { BKGymBelegpruefungD16 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD16';
import { BKGymBelegpruefungD4 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD4';
import { BKGymBelegpruefungD17 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD17';
import { BKGymBelegpruefungD1 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD1';
import { BKGymBelegpruefungD14 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD14';
import { BKGymBelegpruefungD2 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD2';
import { BKGymBelegpruefungD15 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD15';
import { BKGymBelegpruefungErgebnisFehler } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungErgebnisFehler';
import { HashSet } from '../../../../java/util/HashSet';
import { BKGymFach } from '../../../../core/data/bk/abi/BKGymFach';
import { GostAbiturFach } from '../../../../core/types/gost/GostAbiturFach';
import { BKGymBelegpruefungD20 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD20';
import { BKGymBelegpruefungD15a } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD15a';
import { BKGymBelegungsfehler } from '../../../../core/abschluss/bk/d/BKGymBelegungsfehler';
import { BKGymBelegpruefungD23 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD23';
import { BKGymBelegpruefungD21 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD21';
import { Class } from '../../../../java/lang/Class';
import { BKGymBelegpruefungD22 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD22';
import { BKGymBelegpruefungD27 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD27';
import type { JavaMap } from '../../../../java/util/JavaMap';
import { BKGymBelegpruefungD28 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD28';
import { BKGymBelegpruefungD25 } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD25';
import type { JavaSet } from '../../../../java/util/JavaSet';
import { BeruflichesGymnasiumStundentafelAbiturfaecherWahlmoeglichkeit } from '../../../../asd/data/schule/BeruflichesGymnasiumStundentafelAbiturfaecherWahlmoeglichkeit';
import { BKGymAbiturdaten, cast_de_svws_nrw_core_abschluss_bk_d_BKGymAbiturdaten } from '../../../../core/abschluss/bk/d/BKGymAbiturdaten';
import { BKGymBelegpruefungErgebnis } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungErgebnis';
import { BeruflichesGymnasiumPruefungsordnungAnlage } from '../../../../asd/types/schule/BeruflichesGymnasiumPruefungsordnungAnlage';
import { GostHalbjahr } from '../../../../core/types/gost/GostHalbjahr';
import { Schulgliederung } from '../../../../asd/types/schule/Schulgliederung';
import { BeruflichesGymnasiumStundentafelFach } from '../../../../asd/data/schule/BeruflichesGymnasiumStundentafelFach';
import { BeruflichesGymnasiumPruefungsordnungAnlageKatalogEintrag } from '../../../../asd/data/schule/BeruflichesGymnasiumPruefungsordnungAnlageKatalogEintrag';
import { BKGymAbiturFachbelegung } from '../../../../core/abschluss/bk/d/BKGymAbiturFachbelegung';
import { BeruflichesGymnasiumStundentafel } from '../../../../asd/data/schule/BeruflichesGymnasiumStundentafel';
import { BKGymBelegpruefungD17a } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD17a';
import { BKGymBelegpruefungD3a } from '../../../../core/abschluss/bk/d/BKGymBelegpruefungD3a';
import { BKGymBelegpruefung } from '../../../../core/abschluss/bk/d/BKGymBelegpruefung';

export class BKGymAbiturdatenManager extends JavaObject {

	/**
	 * Die Zweite Fremdsprache
	 */
	public readonly zweiteFremdsprache: string = "Zweite Fremdsprache";

	/**
	 * Die Neueinsetzende Fremdsprache
	 */
	public readonly neueFremdsprache: string = "Neue Fremdsprache";

	/**
	 * Das Wahlfach
	 */
	public readonly wahlfach: string = "Wahlfach";

	/**
	 * Die Abiturdaten des Schülers
	 */
	private readonly abidaten: BKGymAbiturdaten;

	/**
	 * Die Schulgliederung des Bildungsgangs des Schülers
	 */
	private readonly gliederung: Schulgliederung;

	/**
	 * Der Fachklassen-Schlüssel des Bildungsgangs des Schülers
	 */
	private readonly fks: string;

	/**
	 * Die Anlage, die zur Schulgliederung und Fachklasse gehört
	 */
	private readonly anlage: BeruflichesGymnasiumPruefungsordnungAnlage;

	/**
	 * Der Manager für die Fächer des beruflichen Gymnasiums
	 */
	private readonly faecherManager: BKGymFaecherManager;

	/**
	 * Das Halbjahr, bis zu welchem die Belegprüfung durchgeführt werden soll
	 */
	private readonly bisHalbjahr: GostHalbjahr;

	/**
	 * Der Belegprüfungsalgorithmus
	 */
	private readonly belegpruefung: BKGymBelegpruefung;

	/**
	 * Eine HashMap, welche den schnellen Zugriff auf die Fachbelegungen für ein Fach anhand der Bezeichnung ermöglicht
	 */
	private readonly mapFachbelegungenByFachbezeichnung: JavaMap<string, BKGymAbiturFachbelegung> = new HashMap<string, BKGymAbiturFachbelegung>();

	/**
	 * Die Menge der Belegprüfungsfehler, die bei den durchgeführten Belegprüfungen aufgetreten sind.
	 */
	private belegpruefungsfehler: List<BKGymBelegungsfehler> = new ArrayList<BKGymBelegungsfehler>();

	/**
	 * Gibt an, ob die Belegprüfung insgesamt erfolgreich war oder nicht.
	 */
	private belegpruefungErfolgreich: boolean = false;

	/**
	 * Eine Map, welche von der Nummer des Abiturfaches auf die Fachbelegung der Abiturdaten verweist.
	 */
	private readonly mapAbiturfachbelegungen: HashMap<number, BKGymAbiturFachbelegung> = new HashMap<number, BKGymAbiturFachbelegung>();


	/**
	 * Erstellt ein neues Manager-Objekt, welches mit den übergebenen Abiturdaten verknüpft wird.
	 *
	 * @param abidaten         die Abiturdaten des Schülers
	 * @param gliederung       die Schulgliederung des Bildungsgangs des Schülers
	 * @param fks              der fünfstellige Fachklassenschlüssel des Bildungsgangs des Schülers
	 * @param faecherManager   der Manager für die Fächer
	 * @param bisHalbjahr      die Art der Belegprüfung - bis zu welchem Halbjahr geprüft werden soll
	 */
	public constructor(abidaten: BKGymAbiturdaten, gliederung: Schulgliederung, fks: string, faecherManager: BKGymFaecherManager, bisHalbjahr: GostHalbjahr) {
		super();
		this.abidaten = abidaten;
		this.gliederung = gliederung;
		this.fks = fks;
		this.faecherManager = faecherManager;
		this.bisHalbjahr = bisHalbjahr;
		this.anlage = this.bestimmeAnlage();
		this.belegpruefung = this.getBelegpruefung();
		this.init();
		this.belegpruefung.pruefe();
		this.belegpruefungsfehler = this.belegpruefung.getBelegungsfehler();
		this.belegpruefungErfolgreich = this.belegpruefung.istErfolgreich();
	}

	/**
	 * Initialisiert bzw. reinitialisert die Datenstrukturen, die für den schnellen Zugriff auf die Daten
	 * eingerichtet werden.
	 */
	public init(): void {
		this.mapFachbelegungenByFachbezeichnung.clear();
		this.mapAbiturfachbelegungen.clear();
		const fachbelegungen: List<BKGymAbiturFachbelegung> = this.abidaten.fachbelegungen;
		for (const fachbelegung of fachbelegungen) {
			if (fachbelegung.abiturFach !== null)
				this.mapAbiturfachbelegungen.put(fachbelegung.abiturFach, fachbelegung);
			const fach: BKGymFach | null = this.faecherManager.get(fachbelegung.fachID);
			if ((fach === null) || (fach.bezeichnung === null))
				continue;
			this.mapFachbelegungenByFachbezeichnung.put(fach.bezeichnung, fachbelegung);
		}
	}

	/**
	 * Ermittelt die Anlage zu einer Fachklasse in der Schulgliederung D01.
	 *
	 * @return die Anlage
	 */
	private bestimmeAnlage(): BeruflichesGymnasiumPruefungsordnungAnlage {
		let _sevar_1540609204 : any;
		const _seexpr_1540609204 = (this.gliederung);
		if (_seexpr_1540609204 === Schulgliederung.D01) {
			_sevar_1540609204 = this.getAnlageD01();
		} else if (_seexpr_1540609204 === Schulgliederung.D02) {
			_sevar_1540609204 = this.getAnlageD02();
		} else {
			throw new DeveloperNotificationException("Die Belegprüfung für die Schulgliederung " + this.gliederung.name() + " wird noch nicht unterstützt.");
		}
		return _sevar_1540609204;
	}

	private getAnlageD01(): BeruflichesGymnasiumPruefungsordnungAnlage {
		let _sevar_2040674675 : any;
		const _seexpr_2040674675 = (this.fks);
		if (_seexpr_2040674675 === "10100") {
			_sevar_2040674675 = BeruflichesGymnasiumPruefungsordnungAnlage.D6;
		} else if (_seexpr_2040674675 === "10200") {
			_sevar_2040674675 = BeruflichesGymnasiumPruefungsordnungAnlage.D1;
		} else if (_seexpr_2040674675 === "10300") {
			_sevar_2040674675 = BeruflichesGymnasiumPruefungsordnungAnlage.D7;
		} else if (_seexpr_2040674675 === "10400") {
			_sevar_2040674675 = BeruflichesGymnasiumPruefungsordnungAnlage.D8;
		} else if (_seexpr_2040674675 === "10500") {
			_sevar_2040674675 = BeruflichesGymnasiumPruefungsordnungAnlage.D2;
		} else if (_seexpr_2040674675 === "10600") {
			_sevar_2040674675 = BeruflichesGymnasiumPruefungsordnungAnlage.D3;
		} else if (_seexpr_2040674675 === "10700") {
			_sevar_2040674675 = BeruflichesGymnasiumPruefungsordnungAnlage.D4;
		} else if (_seexpr_2040674675 === "10900") {
			_sevar_2040674675 = BeruflichesGymnasiumPruefungsordnungAnlage.D12;
		} else if (_seexpr_2040674675 === "11100") {
			_sevar_2040674675 = BeruflichesGymnasiumPruefungsordnungAnlage.D9;
		} else if (_seexpr_2040674675 === "11200") {
			_sevar_2040674675 = BeruflichesGymnasiumPruefungsordnungAnlage.D13;
		} else if (_seexpr_2040674675 === "11400") {
			_sevar_2040674675 = BeruflichesGymnasiumPruefungsordnungAnlage.D10;
		} else if (_seexpr_2040674675 === "11500") {
			_sevar_2040674675 = BeruflichesGymnasiumPruefungsordnungAnlage.D3a;
		} else {
			throw new DeveloperNotificationException("Die Belegprüfung für die Schulgliederung " + this.gliederung.name() + " und den Fachklassenschlüssel " + this.fks + " wird noch nicht unterstützt.");
		}
		return _sevar_2040674675;
	}

	private getAnlageD02(): BeruflichesGymnasiumPruefungsordnungAnlage {
		let _sevar_999310226 : any;
		const _seexpr_999310226 = (this.fks);
		if (_seexpr_999310226 === "10100") {
			_sevar_999310226 = BeruflichesGymnasiumPruefungsordnungAnlage.D14;
		} else if (_seexpr_999310226 === "10200") {
			_sevar_999310226 = BeruflichesGymnasiumPruefungsordnungAnlage.D27;
		} else if (_seexpr_999310226 === "10300") {
			_sevar_999310226 = BeruflichesGymnasiumPruefungsordnungAnlage.D22;
		} else if (_seexpr_999310226 === "10400") {
			_sevar_999310226 = BeruflichesGymnasiumPruefungsordnungAnlage.D23;
		} else if (_seexpr_999310226 === "10600") {
			_sevar_999310226 = BeruflichesGymnasiumPruefungsordnungAnlage.D25;
		} else if (_seexpr_999310226 === "10700") {
			_sevar_999310226 = BeruflichesGymnasiumPruefungsordnungAnlage.D15;
		} else if (_seexpr_999310226 === "10900") {
			_sevar_999310226 = BeruflichesGymnasiumPruefungsordnungAnlage.D19;
		} else if (_seexpr_999310226 === "11000") {
			_sevar_999310226 = BeruflichesGymnasiumPruefungsordnungAnlage.D16;
		} else if (_seexpr_999310226 === "11100") {
			_sevar_999310226 = BeruflichesGymnasiumPruefungsordnungAnlage.D17;
		} else if (_seexpr_999310226 === "11300") {
			_sevar_999310226 = BeruflichesGymnasiumPruefungsordnungAnlage.D18;
		} else if (_seexpr_999310226 === "11400") {
			_sevar_999310226 = BeruflichesGymnasiumPruefungsordnungAnlage.D20;
		} else if (_seexpr_999310226 === "11500") {
			_sevar_999310226 = BeruflichesGymnasiumPruefungsordnungAnlage.D21;
		} else if (_seexpr_999310226 === "12000") {
			_sevar_999310226 = BeruflichesGymnasiumPruefungsordnungAnlage.D17a;
		} else if (_seexpr_999310226 === "12100") {
			_sevar_999310226 = BeruflichesGymnasiumPruefungsordnungAnlage.D15a;
		} else if (_seexpr_999310226 === "12200") {
			_sevar_999310226 = BeruflichesGymnasiumPruefungsordnungAnlage.D28;
		} else {
			throw new DeveloperNotificationException("Die Belegprüfung für die Schulgliederung " + this.gliederung.name() + " und den Fachklassenschlüssel " + this.fks + " wird noch nicht unterstützt.");
		}
		return _sevar_999310226;
	}

	/**
	 * Erstellt die zugehörige Belegprüfung mit den Abiturdaten anhand des übergebenen Bildungsganges.
	 *
	 * @return der Belegprüfungsalgorithmus
	 */
	private getBelegpruefung(): BKGymBelegpruefung {
		let _sevar_2058483433 : any;
		const _seexpr_2058483433 = (this.anlage);
		if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D1) {
			_sevar_2058483433 = new BKGymBelegpruefungD1(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D2) {
			_sevar_2058483433 = new BKGymBelegpruefungD2(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D3) {
			_sevar_2058483433 = new BKGymBelegpruefungD3(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D3a) {
			_sevar_2058483433 = new BKGymBelegpruefungD3a(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D4) {
			_sevar_2058483433 = new BKGymBelegpruefungD4(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D6) {
			_sevar_2058483433 = new BKGymBelegpruefungD6(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D7) {
			_sevar_2058483433 = new BKGymBelegpruefungD7(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D8) {
			_sevar_2058483433 = new BKGymBelegpruefungD8(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D9) {
			_sevar_2058483433 = new BKGymBelegpruefungD9(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D10) {
			_sevar_2058483433 = new BKGymBelegpruefungD10(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D12) {
			_sevar_2058483433 = new BKGymBelegpruefungD12(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D13) {
			_sevar_2058483433 = new BKGymBelegpruefungD13(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D14) {
			_sevar_2058483433 = new BKGymBelegpruefungD14(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D15) {
			_sevar_2058483433 = new BKGymBelegpruefungD15(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D15a) {
			_sevar_2058483433 = new BKGymBelegpruefungD15a(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D16) {
			_sevar_2058483433 = new BKGymBelegpruefungD16(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D17) {
			_sevar_2058483433 = new BKGymBelegpruefungD17(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D17a) {
			_sevar_2058483433 = new BKGymBelegpruefungD17a(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D18) {
			_sevar_2058483433 = new BKGymBelegpruefungD18(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D19) {
			_sevar_2058483433 = new BKGymBelegpruefungD19(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D20) {
			_sevar_2058483433 = new BKGymBelegpruefungD20(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D21) {
			_sevar_2058483433 = new BKGymBelegpruefungD21(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D22) {
			_sevar_2058483433 = new BKGymBelegpruefungD22(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D23) {
			_sevar_2058483433 = new BKGymBelegpruefungD23(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D25) {
			_sevar_2058483433 = new BKGymBelegpruefungD25(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D27) {
			_sevar_2058483433 = new BKGymBelegpruefungD27(this);
		} else if (_seexpr_2058483433 === BeruflichesGymnasiumPruefungsordnungAnlage.D28) {
			_sevar_2058483433 = new BKGymBelegpruefungD28(this);
		} else {
			throw new DeveloperNotificationException("Die Belegprüfung für die Schulgliederung " + this.gliederung.name() + " wird noch nicht unterstützt.");
		}
		return _sevar_2058483433;
	}

	/**
	 * Getter für den Zugriff auf die Abiturdaten
	 *
	 * @return die Abiturdaten
	 */
	public getAbidaten(): BKGymAbiturdaten {
		return this.abidaten;
	}

	/**
	 * Getter für den Zugriff auf die Anlage
	 *
	 * @return die Anlage
	 */
	public getAnlage(): BeruflichesGymnasiumPruefungsordnungAnlage {
		return this.anlage;
	}

	/**
	 * Getter für den Zugriff auf das Halbjahr, bis zu welchem geprüft werde soll
	 *
	 * @return das Halbjahr
	 */
	public getBisHalbjahr(): GostHalbjahr {
		return this.bisHalbjahr;
	}

	/**
	 * Getter für den Zugriff auf die Schulgliederung des Bildungsganges
	 *
	 * @return die Schulgliederung des Bildungsganges
	 */
	public getGliederung(): Schulgliederung {
		return this.gliederung;
	}

	/**
	 * Getter für den Zugriff auf den Fachklassenschlüssel des Bildungsganges
	 *
	 * @return der Fachklassenschlüssel des Bildungsganges
	 */
	public getFachklassenschluessel(): string {
		return this.fks;
	}

	/**
	 * Prüft ob es sich um die Bezeichnung für das symbolische Wahlfach handelt.
	 * @param bezeichnung   eine Fachbezeichnung aus der Stundentafel
	 *
	 * @return true wenn es die Repräsentation für das Wahlfach ist, sonst false
	 */
	public istWahlfach(bezeichnung: string): boolean {
		return JavaObject.equalsTranspiler(bezeichnung, (this.wahlfach));
	}

	/**
	 * Prüft ob es sich um die Bezeichnung für das symbolische Fach Zweite Fremdsprache handelt.
	 * @param bezeichnung   eine Fachbezeichnung aus der Stundentafel
	 *
	 * @return true wenn es die Repräsentation für die zweite Fremdsprache ist, sonst false
	 */
	public istZweiteFremdsprache(bezeichnung: string): boolean {
		return JavaObject.equalsTranspiler(bezeichnung, (this.zweiteFremdsprache));
	}

	/**
	 * Prüft ob es sich um die Bezeichnung für das symbolische Fach Neue Fremdsprache handelt.
	 * @param bezeichnung   eine Fachbezeichnung aus der Stundentafel
	 *
	 * @return true wenn es die Repräsentation für das Wahlfach ist, sonst false
	 */
	public istNeueFremdsprache(bezeichnung: string): boolean {
		return JavaObject.equalsTranspiler(bezeichnung, (this.neueFremdsprache));
	}

	/**
	 * Getter für den Zugriff auf das Schuljahr in dem das Abitur stattfindet
	 *
	 * @return das Schuljahr des Abiturs
	 */
	public getSchuljahrAbitur(): number {
		return this.abidaten.schuljahrAbitur;
	}

	/**
	 * Gibt das Ergebnis der Belegprüfung zurück. Dieses enthält eine Liste der Fehler, die bei der Belegprüfung
	 * festgestellt wurden und ob diese erfolgreich gewesen ist oder nicht.
	 *
	 * @return das Ergebnis der Belegprüfung
	 */
	public getBelegpruefungErgebnis(): BKGymBelegpruefungErgebnis {
		const ergebnis: BKGymBelegpruefungErgebnis = new BKGymBelegpruefungErgebnis();
		ergebnis.erfolgreich = this.belegpruefungErfolgreich;
		for (let i: number = 0; i < this.belegpruefungsfehler.size(); i++) {
			const fehler: BKGymBelegungsfehler = this.belegpruefungsfehler.get(i);
			ergebnis.fehlercodes.add(new BKGymBelegpruefungErgebnisFehler(fehler));
		}
		return ergebnis;
	}

	/**
	 * Liefert eine Belegung anhand der Fachbezeichnung zurück
	 *
	 * @param bezeichnung   das Fach
	 *
	 * @return die Fachbelegung
	 */
	public getFachbelegungByBezeichnung(bezeichnung: string): BKGymAbiturFachbelegung | null {
		return this.mapFachbelegungenByFachbezeichnung.get(bezeichnung);
	}

	/**
	 * Gibt das Abiturfachdaten für das geforderte Abiturfach zurück.
	 *
	 * @param abiFach Das n. Abiturfach, das gewünscht ist
	 *
	 * @return die entsprechende Fachbelegung des Abiturfachs
	 */
	public getAbiFachbelegung(abiFach: GostAbiturFach): BKGymAbiturFachbelegung | null {
		return this.mapAbiturfachbelegungen.get(abiFach.id);
	}

	/**
	 * Prüft, ob es sich bei der Fachbelegung um eine Belegung einer Fremdsprache handelt.
	 *
	 * @param fb   die Fachbelegung
	 *
	 * @return true, wenn es sich um eine Fremdsprachenbelegung handelt, und ansonsten false
	 */
	public istFremdsprachenbelegung(fb: BKGymAbiturFachbelegung): boolean {
		const fbFach: BKGymFach | null = this.faecherManager.get(fb.fachID);
		if ((fbFach === null) || (fbFach.bezeichnung === null))
			return false;
		return fbFach.istFremdsprache;
	}

	/**
	 * Prüft, ob es sich bei der Fachbelegung um eine Belegung einer neu einsetzenden Fremdsprache handelt.
	 *
	 * @param fb   die Fachbelegung
	 *
	 * @return true, wenn es sich um ein neu einsetzende Fremdsprachenbelegung handelt, und ansonsten false
	 */
	public istNeueFremdsprachenbelegung(fb: BKGymAbiturFachbelegung): boolean {
		const fbFach: BKGymFach | null = this.faecherManager.get(fb.fachID);
		if ((fbFach === null) || (fbFach.bezeichnung === null))
			return false;
		return fbFach.istFremdSpracheNeuEinsetzend;
	}

	/**
	 * liefert die Fachbezeichnung einer Belegung
	 *
	 * @param fb   die Fachbelegung
	 *
	 * @return die Fachbezeichnung
	 */
	public getFachbezeichnungFromFachbelegung(fb: BKGymAbiturFachbelegung): string {
		const fbFach: BKGymFach | null = this.faecherManager.get(fb.fachID);
		if ((fbFach === null) || (fbFach.bezeichnung === null))
			return "";
		return fbFach.bezeichnung;
	}

	/**
	 * liefert die Fachbezeichnung einer Belegung
	 *
	 * @param fb   die Fachbelegung
	 *
	 * @return die Fachbezeichnung
	 */
	public getFachkuerzelFromFachbelegung(fb: BKGymAbiturFachbelegung): string {
		const fbFach: BKGymFach | null = this.faecherManager.get(fb.fachID);
		if ((fbFach === null) || (fbFach.kuerzelAnzeige === null))
			return "";
		return fbFach.kuerzelAnzeige;
	}

	/**
	 * Prüft, ob die übergebene Fachbelgung als Fach in der Stundentafel vorkommt bzw. vorkommen kann.
	 *
	 * @param tafel   die Stundentafel
	 * @param fb      die Fachbelegung
	 *
	 * @return der Eintrag der Stundentafel, bei welchem die Fachbelegung vorkommt, oder null, wenn keine Zuordnung zur Stundentafel möglich ist
	 */
	public getFachByBelegung(tafel: BeruflichesGymnasiumStundentafel, fb: BKGymAbiturFachbelegung): BeruflichesGymnasiumStundentafelFach | null {
		const fbFach: BKGymFach | null = this.faecherManager.get(fb.fachID);
		if ((fbFach === null) || (fbFach.bezeichnung === null))
			return null;
		for (const tafelFach of tafel.faecher)
			if (JavaObject.equalsTranspiler(tafelFach.fachbezeichnung, (fbFach.bezeichnung)))
				return tafelFach;
		if (fbFach.istFremdsprache)
			for (const tafelFach of tafel.faecher)
				if (JavaObject.equalsTranspiler(tafelFach.fachbezeichnung, ("Zweite Fremdsprache")))
					return tafelFach;
		for (const tafelFach of tafel.faecher)
			if (JavaObject.equalsTranspiler(tafelFach.fachbezeichnung, ("Wahlfach")))
				return tafelFach;
		return null;
	}

	/**
	 * Gibt TRUE zurück falls die übergebene Fachbelegung in der Stundentafel in der durch Abifach gegebenen Rolle gültig ist.
	 *
	 * @param tafel     die Stundentafel
	 * @param fb        die zu prüfende Fachbelegung
	 * @param abifach   die Rolle als Abiturfach oder null als Nicht-Abiturfach
	 *
	 * @return true, wenn die Belegung mit der angegebenen Kursart gültig ist und ansonsten FALSE
	 */
	public isValidKursartFachbelegung(tafel: BeruflichesGymnasiumStundentafel, fb: BKGymAbiturFachbelegung, abifach: GostAbiturFach): boolean {
		const tafelFach: BeruflichesGymnasiumStundentafelFach | null = this.getFachByBelegung(tafel, fb);
		if (tafelFach === null)
			return false;
		if (((abifach as unknown === GostAbiturFach.LK1 as unknown) && (tafelFach.abifach !== null) && (tafelFach.abifach === 1)) || ((abifach as unknown === GostAbiturFach.LK2 as unknown) && (tafelFach.abifach !== null) && (tafelFach.abifach === 2)))
			return JavaObject.equalsTranspiler(tafelFach.kursart, ("LK"));
		if ((abifach as unknown === GostAbiturFach.AB3 as unknown) || (abifach as unknown === GostAbiturFach.AB4 as unknown) || (abifach as unknown === GostAbiturFach.AB5 as unknown)) {
			for (const wm of tafel.wahlmoeglichkeiten) {
				const abifaecher: List<string> = (abifach as unknown === GostAbiturFach.AB3 as unknown) ? wm.abifach3 : ((abifach as unknown === GostAbiturFach.AB4 as unknown) ? wm.abifach4 : wm.abifach5);
				for (const bezeichnung of abifaecher)
					if (JavaObject.equalsTranspiler(bezeichnung, (tafelFach.fachbezeichnung)))
						return true;
			}
			return false;
		}
		return true;
	}

	/**
	 * Prüft, ob die übergebene Kombination aus drittem und viertem Abiturfach gültig ist.
	 * Dabei werden die Spezialfälle für eine zweite Fremdsprache und ein mögliches Wahlfach (Zukunftstauglichkeit)
	 * berücksichtigt
	 *
	 * @param wm    die Wahlmöglichkeit
	 * @param ab3   die Belegung des dritten Abiturfaches
	 * @param ab4   die Belegung des vierten Abiturfaches
	 *
	 * @return true, wenn sie gültig ist, und ansonsten false
	 */
	private isValidWahlmoeglichkeit(wm: BeruflichesGymnasiumStundentafelAbiturfaecherWahlmoeglichkeit, ab3: BKGymAbiturFachbelegung, ab4: BKGymAbiturFachbelegung): boolean {
		const ab3Fach: BKGymFach | null = this.faecherManager.get(ab3.fachID);
		const ab4Fach: BKGymFach | null = this.faecherManager.get(ab4.fachID);
		if ((ab3Fach === null) || (ab4Fach === null))
			return false;
		let wm3: string | null = null;
		for (const fachBez3 of wm.abifach3)
			if (JavaObject.equalsTranspiler(fachBez3, (ab3Fach.bezeichnung)) || (JavaObject.equalsTranspiler("Zweite Fremdsprache", (fachBez3)) && ab3Fach.istFremdsprache) || JavaObject.equalsTranspiler("Wahlfach", (fachBez3)))
				wm3 = fachBez3;
		if (wm3 === null)
			return false;
		for (const fachBez4 of wm.abifach4)
			if (JavaObject.equalsTranspiler(fachBez4, (ab4Fach.bezeichnung)) || (JavaObject.equalsTranspiler("Zweite Fremdsprache", (fachBez4)) && ab4Fach.istFremdsprache) || JavaObject.equalsTranspiler("Wahlfach", (fachBez4)))
				return true;
		return false;
	}

	/**
	 * Prüft ob die Fachkombination für das dritte und vierte Abiturfach gültig ist.
	 *
	 * @param tafel   die zu prüfende Stundentafel mit ihren Wahlmöglichkeiten
	 * @param ab3     die Belegung des dritten Abiturfaches
	 * @param ab4     die Belegung des vierten Abiturfaches
	 *
	 * @return true, wenn die Wahlmöglichkeit besteht, ansonsten false
	 */
	public pruefeAbiGrundkurswahl(tafel: BeruflichesGymnasiumStundentafel, ab3: BKGymAbiturFachbelegung, ab4: BKGymAbiturFachbelegung): boolean {
		for (const wm of tafel.wahlmoeglichkeiten) {
			if (this.isValidWahlmoeglichkeit(wm, ab3, ab4))
				return true;
		}
		return false;
	}

	/**
	 * Liefert eine Map, die zu jedem Index der Fachtafel die zugehörigen Fächer liefert.
	 * Hier sind die Wahlmöglichkeiten enthalten, die eine Stundentafelvariante erlaubt.
	 *
	 * @param tafel   die Stundentafel mit der Liste der Fächer
	 *
	 * @return die Map
	 */
	public getMapFaecherFromTafelByIndex(tafel: BeruflichesGymnasiumStundentafel): JavaMap<number, List<BeruflichesGymnasiumStundentafelFach>> {
		const mapFaecher: JavaMap<number, List<BeruflichesGymnasiumStundentafelFach>> = new HashMap<number, List<BeruflichesGymnasiumStundentafelFach>>();
		for (const fach of tafel.faecher) {
			if ((fach.stundenumfang[0] > 0) || (fach.stundenumfang[1] > 0) || (fach.stundenumfang[2] > 0) || (fach.stundenumfang[3] > 0) || (fach.stundenumfang[4] > 0) || (fach.stundenumfang[5] > 0)) {
				let faecher: List<BeruflichesGymnasiumStundentafelFach> | null = mapFaecher.get(fach.sortierung);
				if (faecher === null) {
					faecher = new ArrayList();
					mapFaecher.put(fach.sortierung, faecher);
				}
				faecher.add(fach);
			}
		}
		return mapFaecher;
	}

	/**
	 * Liefert eine Map, die zu jedem Fach der Stundentafel die zugehörigen Belegungen zuordnet.
	 *
	 * @param tafel   die Stundentafel aus der APO-BK Anlage D
	 *
	 * @return die Map
	 */
	public getMapBelegungenForTafelByFach(tafel: BeruflichesGymnasiumStundentafel): JavaMap<BeruflichesGymnasiumStundentafelFach, List<BKGymAbiturFachbelegung>> {
		const mapBelegungenByFach: JavaMap<BeruflichesGymnasiumStundentafelFach, List<BKGymAbiturFachbelegung>> = new HashMap<BeruflichesGymnasiumStundentafelFach, List<BKGymAbiturFachbelegung>>();
		const zugeordnet: JavaSet<BKGymAbiturFachbelegung> = new HashSet<BKGymAbiturFachbelegung>();
		let zweiteFremdspracheBelegungen: List<BKGymAbiturFachbelegung> = new ArrayList<BKGymAbiturFachbelegung>();
		let neueFremdspracheBelegungen: List<BKGymAbiturFachbelegung> = new ArrayList<BKGymAbiturFachbelegung>();
		let wahlfachBelegungen: List<BKGymAbiturFachbelegung> = new ArrayList<BKGymAbiturFachbelegung>();
		for (const fach of tafel.faecher) {
			let belegungen: List<BKGymAbiturFachbelegung> | null = mapBelegungenByFach.get(fach);
			if (belegungen === null) {
				belegungen = new ArrayList();
				mapBelegungenByFach.put(fach, belegungen);
			}
			const belegung: BKGymAbiturFachbelegung | null = this.getFachbelegungByBezeichnung(fach.fachbezeichnung);
			if (belegung !== null) {
				belegungen.add(belegung);
				zugeordnet.add(belegung);
			} else
				if (this.istZweiteFremdsprache(fach.fachbezeichnung))
					zweiteFremdspracheBelegungen = belegungen;
				else
					if (this.istNeueFremdsprache(fach.fachbezeichnung))
						neueFremdspracheBelegungen = belegungen;
					else
						if (this.istWahlfach(fach.fachbezeichnung))
							wahlfachBelegungen = belegungen;
		}
		const fachbelegungen: List<BKGymAbiturFachbelegung> = this.abidaten.fachbelegungen;
		for (const fachbelegung of fachbelegungen) {
			if (!zugeordnet.contains(fachbelegung)) {
				if (this.istNeueFremdsprachenbelegung(fachbelegung))
					neueFremdspracheBelegungen.add(fachbelegung);
				else
					if (this.istFremdsprachenbelegung(fachbelegung))
						zweiteFremdspracheBelegungen.add(fachbelegung);
					else
						wahlfachBelegungen.add(fachbelegung);
			}
		}
		return mapBelegungenByFach;
	}

	/**
	 * Liefert die Stundentafeln, die zur APO-BK-Anlage dieses Managers gehören
	 *
	 * @return die Liste der Stundentafeln
	 */
	public getStundentafeln(): List<BeruflichesGymnasiumStundentafel> {
		const result: List<BeruflichesGymnasiumStundentafel> = new ArrayList<BeruflichesGymnasiumStundentafel>();
		const schuljahr: number = this.getSchuljahrAbitur();
		const poke: BeruflichesGymnasiumPruefungsordnungAnlageKatalogEintrag | null = this.anlage.daten(schuljahr);
		if (poke === null)
			return result;
		return poke.stundentafeln;
	}

	transpilerCanonicalName(): string {
		return 'de.svws_nrw.core.abschluss.bk.d.BKGymAbiturdatenManager';
	}

	isTranspiledInstanceOf(name: string): boolean {
		return ['de.svws_nrw.core.abschluss.bk.d.BKGymAbiturdatenManager'].includes(name);
	}

	public static class = new Class<BKGymAbiturdatenManager>('de.svws_nrw.core.abschluss.bk.d.BKGymAbiturdatenManager');

}

export function cast_de_svws_nrw_core_abschluss_bk_d_BKGymAbiturdatenManager(obj: unknown): BKGymAbiturdatenManager {
	return obj as BKGymAbiturdatenManager;
}
